<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>è€è¶™ç”Ÿæ—¥å¿«æ¨‚ğŸ‚ç©å€‹å°éŠæˆ²å§ï¼</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <style>
    body {
      background: #f2f2f2;
      font-family: 'Noto Sans TC', Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 480px;
      margin: 40px auto 0 auto;
      padding: 10px;
    }
    h1 {
      text-align: center;
      color: #c77d0a;
      margin-bottom: 20px;
      letter-spacing: 2px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    .card {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px #bbb6;
      aspect-ratio: 3/4;
      position: relative;
      cursor: pointer;
      perspective: 800px;
    }
    .card-inner {
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
      position: relative;
    }
    .flipped .card-inner {
      transform: rotateY(180deg);
    }
    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 10px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .card-front {
      background: #eed382;
      color: #9e6900;
      font-size: 2rem;
      font-weight: bold;
      letter-spacing: 1px;
    }
    .card-back img {
      width: auto;
      height: 96%;
      max-width: 96%;
      max-height: 96%;
      object-fit: contain;
      display: block;
      margin: 0 auto;
    }
    .card-back {
      transform: rotateY(180deg);
    }
    /* å®Œæˆå½ˆçª—èˆ‡ç¥ç¦å¡ç‰‡ */
    #finish-time-modal, #final-message {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      z-index: 99;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.85);
      overflow: auto;
    }
    #finish-time-modal .modal-inner {
      background: #fffbe6;
      border-radius: 18px;
      box-shadow: 0 8px 24px #0003;
      padding: 30px 28px;
      text-align: center;
      max-width: 90vw;
      animation: fadein 0.6s;
    }
    #finish-time-msg {
      font-size: 1.4em;
      margin-bottom: 16px;
      color: #c77d0a;
    }
    #final-message .card {
      max-width: 370px;
      margin: 0 auto;
      background: #fffbe6;
      color: #715800;
      padding: 32px 20px 18px 20px;
      border-radius: 18px;
      box-shadow: 0 8px 24px #0003;
      text-align: center;
      font-size: 1.1em;
      line-height: 1.7;
      animation: fadein 1s;
      position: relative;
    }
    #final-message h2 {
      margin-bottom: 14px;
      color: #c77d0a;
    }
    .final-btns {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin: 30px 0 0 0;
    }
    .final-btns button {
      padding: 8px 24px;
      background: #f1b53a;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.2s;
    }
    .final-btns button:last-child {
      background: #c77d0a;
    }
    .final-btns button:hover {
      filter: brightness(1.1);
    }
    /* æ–°å¢ï¼šå¤§åœ–ç€è¦½ */
    .all-photos {
      margin-top: 20px;
      display: none;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      animation: fadein 0.7s;
    }
    .all-photos img {
      width: 110px;
      max-width: 44vw;
      border-radius: 12px;
      box-shadow: 0 2px 8px #bbb6;
      cursor: pointer;
      transition: transform 0.2s;
      object-fit: contain;
    }
    .all-photos img:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 24px #c77d0a66;
    }
    /* é»å¤§åœ–æ™‚å…¨è¢å¹•é¡¯ç¤º */
    #photo-viewer {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.96);
      z-index: 9999;
      justify-content: center;
      align-items: center;
    }
    #photo-viewer img {
      max-width: 95vw;
      max-height: 95vh;
      border-radius: 14px;
      box-shadow: 0 8px 32px #000c;
      background: #fff;
    }
    #photo-viewer:active, #photo-viewer:after {
      cursor: zoom-out;
    }
    @keyframes fadein {
      from { opacity: 0;}
      to { opacity: 1;}
    }
    @media (max-width: 520px) {
      .container { max-width: 99vw; padding: 2vw;}
      .grid { gap: 2vw;}
      #final-message .card { padding: 18px 3vw 8px 3vw;}
      .all-photos img { width: 96px; }
      #final-message .card { font-size:1em; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>è€è¶™ç”Ÿæ—¥å¿«æ¨‚ï¼</h1>
    <div class="grid" id="grid"></div>
  </div>
  <!-- å®ŒæˆéŠæˆ²è¨ˆæ™‚å½ˆçª— -->
  <div id="finish-time-modal">
    <div class="modal-inner">
      <div id="finish-time-msg"></div>
      <button onclick="showFinalMessage()">ç¹¼çºŒ</button>
    </div>
  </div>
  <!-- ç¥ç¦å¡ç‰‡+æŒ‰éˆ•+çœ‹å¤§åœ– -->
  <div id="final-message">
    <div class="card">
      <h2>è€è¶™ç”Ÿæ—¥å¿«æ¨‚ï¼ï¼ï¼ˆæˆ‘æ•…æ„é¸å…©å¼µå¾ˆåƒçš„ï¼Œä¸æ˜¯ç…§ç‰‡ä¸å¤ å“¦ğŸ˜†ï¼‰</h2>
      <div style="text-align:left; margin-top:12px; font-size:1.08em;">
        è€è¶™è¬è¬ä½ ä¸€ç›´ä»¥ä¾†éƒ½æ˜¯å€‹å¾ˆç¨±è·çš„å¥½æœ‹å‹ï¼Œæˆ‘æ¯”è¼ƒå­¤åƒ»ï¼Œå…¶å¯¦ä¹Ÿæ²’æœ‰å¾ˆå¸¸ä¸»å‹•é—œå¿ƒåˆ¥äººï¼Œä¸éä¹…è€Œä¹…ä¹‹ä¹Ÿå—ä½ å½±éŸ¿ï¼Œé–‹å§‹æœƒé—œå¿ƒåˆ¥äººï¼›<br><br>
        æˆ‘å›åœ‹é–‹å§‹ç…§é¡§çš®çš®ä¹‹å¾Œï¼Œä½ ä¹Ÿæ™‚ä¸æ™‚é—œå¿ƒæˆ‘å’Œçš®çš®ï¼Œä¹Ÿåªæœ‰ä½ æœ‰å¹«çš®çš®å‰ªå½±ç‰‡(é€£æˆ‘è‡ªå·±éƒ½æ²’æœ‰å‰ª)ï¼ŒçœŸçš„å¾ˆæ„Ÿå‹•ï¼Œæˆ‘æƒ³çš®çš®åœ¨å¤©ä¸Šä¸€å®šç¹¼çºŒèª¿çš®è‘—ï¼Œä¹Ÿæœƒæƒ¦è¨˜è‘—æˆ‘å€‘ã€‚<br><br>
        å¸Œæœ›ä½ åœ¨æ¾³æ´²å¯ä»¥ç¹¼çºŒéè‘—å¾ˆèˆ’é©çš„ç”Ÿæ´»ï¼Œæœä½ çš„ç›®æ¨™é‚é€²ï¼Œæˆ‘ç›¸ä¿¡æ¯å€‹éšæ®µé›–ç„¶æœ‰ä¸åŒçš„å›°æ“¾ï¼Œä½†ä¸€åˆ‡éƒ½æœƒå¥½å¥½çš„ã€‚<br><br>
        <em style="float:right;">Best Friend Forever...</em>
      </div>
      <div class="final-btns">
        <button onclick="location.reload()">å†ç©ä¸€æ¬¡</button>
        <button onclick="showPhotos()">çœ‹ç…§ç‰‡</button>
      </div>
      <div class="all-photos" id="all-photos"></div>
    </div>
  </div>
  <!-- å¤§åœ–å…¨è¢å¹•æª¢è¦– -->
  <div id="photo-viewer" onclick="this.style.display='none'">
    <img id="viewer-img" src="">
  </div>
<script>
  // è¨˜éŒ„é–‹å§‹æ™‚é–“
  const startTime = Date.now();

  // 1~8 å…©ä»½å…±16å¼µå¡
  const cards = [];
  for(let i=1; i<=8; i++) {
    cards.push(i, i); // å…©ä»½
  }
  // æ´—ç‰Œ
  for(let i = cards.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [cards[i], cards[j]] = [cards[j], cards[i]];
  }
  const grid = document.getElementById('grid');
  let flipped = [];
  let matched = 0;
  let gameSeconds = 0; // æ–°å¢è¨ˆæ™‚è®Šæ•¸

  // å»ºç«‹å¡ç‰‡
  cards.forEach((num, idx) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="card-inner">
        <div class="card-front">?</div>
        <div class="card-back"><img src="${num}.jpg" alt="memory"></div>
      </div>
    `;
    card.addEventListener('click', function() {
      if(card.classList.contains('flipped') || flipped.length === 2) return;
      card.classList.add('flipped');
      flipped.push({card, num});
      if(flipped.length === 2) {
        if(flipped[0].num === flipped[1].num) {
          matched += 2;
          flipped = [];
          if(matched === cards.length) {
            setTimeout(showTimeModal, 800);
          }
        } else {
          setTimeout(()=> {
            flipped[0].card.classList.remove('flipped');
            flipped[1].card.classList.remove('flipped');
            flipped = [];
          }, 900);
        }
      }
    });
    grid.appendChild(card);
  });

  // ç¬¬ä¸€éšæ®µï¼šå®Œæˆå½ˆçª—ï¼Œé¡¯ç¤ºåˆ†ç§’
  function showTimeModal() {
    gameSeconds = Math.floor((Date.now() - startTime) / 1000);
    const m = Math.floor(gameSeconds / 60);
    const s = gameSeconds % 60;
    let timeStr = m > 0 ? `${m} åˆ† ${s} ç§’` : `${s} ç§’`;
    document.getElementById('finish-time-msg').innerHTML = `ä½ èŠ±äº† <b>${timeStr}</b> å®ŒæˆéŠæˆ²ï¼ï¼Œæ˜¯ä¸æ˜¯è€äº†ğŸ¤£`;
    document.getElementById('finish-time-modal').style.display = 'flex';
  }

  // ç¬¬äºŒéšæ®µï¼šç¥ç¦å¡ç‰‡
  function showFinalMessage() {
    document.getElementById('finish-time-modal').style.display = 'none';
    document.getElementById('final-message').style.display = 'flex';
    // æ¯æ¬¡é€²ä¾†éƒ½å…ˆé—œæ‰å¤§åœ–å€
    document.getElementById('all-photos').style.display = 'none';
  }

  // ç¬¬ä¸‰éšæ®µï¼šé¡¯ç¤ºæ‰€æœ‰å¤§åœ–
  function showPhotos() {
    const allPhotos = document.getElementById('all-photos');
    allPhotos.innerHTML = '';
    for(let i=1; i<=8; i++) {
      const img = document.createElement('img');
      img.src = `${i}.jpg`;
      img.alt = `ç…§ç‰‡${i}`;
      img.title = 'é»æ“Šæ”¾å¤§';
      img.onclick = () => showPhoto(i);
      allPhotos.appendChild(img);
    }
    allPhotos.style.display = 'flex';
    // æ»¾å‹•åˆ°å¤§åœ–å€
    setTimeout(()=> {
      allPhotos.scrollIntoView({behavior: 'smooth'});
    }, 100);
  }

  // é»åœ–æ”¾å¤§
  function showPhoto(i) {
    const viewer = document.getElementById('photo-viewer');
    document.getElementById('viewer-img').src = `${i}.jpg`;
    viewer.style.display = 'flex';
  }
</script>
</body>
</html>
